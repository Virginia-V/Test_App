<krpano version="1.23" title="Virtual Tour">

  <include url="skin/vtourskin.xml" />

  <!-- Skin settings: KEEPVIEW ensures our view settings persist -->
  <skin_settings maps="false"
                 maps_type="openstreetmaps"
                 maps_bing_api_key=""
                 maps_google_api_key=""
                 maps_zoombuttons="false"
                 maps_loadonfirstuse="true"
                 gyro="true"
                 gyro_keeplookingdirection="false"
                 webvr="true"
                 webvr_keeplookingdirection="true"
                 webvr_prev_next_hotspots="true"
                 autotour="false"
                 littleplanetintro="false"
                 followmousecontrol="false"
                 title="true"
                 thumbs="true"
                 thumbs_width="120" thumbs_height="80" thumbs_padding="10" thumbs_crop="0|40|240|160"
                 thumbs_opened="false"
                 thumbs_text="false"
                 thumbs_dragging="true"
                 thumbs_onhoverscrolling="false"
                 thumbs_scrollbuttons="false"
                 thumbs_scrollindicator="false"
                 thumbs_loop="false"
                 tooltips_buttons="false"
                 tooltips_thumbs="false"
                 tooltips_hotspots="false"
                 tooltips_mapspots="false"
                 deeplinking="false"
                 loadscene_flags="KEEPVIEW,MERGE"
                 loadscene_blend="OPENBLEND(0.5, 0.0, 0.75, 0.05, linear)"
                 loadscene_blend_prev="SLIDEBLEND(0.5, 180, 0.75, linear)"
                 loadscene_blend_next="SLIDEBLEND(0.5,   0, 0.75, linear)"
                 loadingtext=""
                 layout_width="100%"
                 layout_maxwidth="814"
                 controlbar_width="-24"
                 controlbar_height="40"
                 controlbar_offset="20"
                 controlbar_offset_closed="-40"
                 controlbar_overlap.no-fractionalscaling="10"
                 controlbar_overlap.fractionalscaling="0"
                 design_skin_images="vtourskin.png"
                 design_bgcolor="0x2D3E50"
                 design_bgalpha="0.8"
                 design_bgborder="0"
                 design_bgroundedge="1"
                 design_bgshadow="0 4 10 0x000000 0.3"
                 design_thumbborder_bgborder="3 0xFFFFFF 1.0"
                 design_thumbborder_padding="2"
                 design_thumbborder_bgroundedge="0"
                 design_text_css="color:#FFFFFF; font-family:Arial;"
                 design_text_shadow="1"
  />

  <!-- Global default view: mild fisheye + very wide zoom range -->
  <view projection="fisheye" fisheye="0.2"
        fov="100" fovmin="5" fovmax="180"
        maxpixelzoom="5.0" limitview="auto" />

  <!-- Handy actions to jump between modes -->
  <action name="set_mild_fisheye">
    set(view.projection, fisheye);
    set(view.fisheye, 0.2);
    set(view.fovmin, 5);
    set(view.fovmax, 180);
    set(view.fov, 100);
  </action>

  <action name="set_closeup">
    set(view.projection, rectilinear);
    set(view.fovmin, 5);
    set(view.fovmax, 120);
    set(view.fov, 15);            <!-- strong zoom-in -->
  </action>

  <action name="set_tinyplanet">
    set(view.projection, stereographic);
    set(view.fovmin, 5);
    set(view.fovmax, 180);
    set(view.fov, 180);           <!-- full dome -->
    set(view.vlookat, 90);        <!-- look down for 'planet' -->
  </action>

  <!-- On-screen buttons (bottom-right, above control bar) -->
  <layer name="ui_group" type="container" keep="true"
         align="bottomright" x="20" y="70" width="auto" height="auto"
         bgcolor="0x000000" bgalpha="0.25" roundedge="8" padding="8" zorder="20">

    <layer name="btn_fisheye" type="text" parent="ui_group"
           html="Fisheye (mild)" css="font-family:Arial; font-size:14px; color:#fff; padding:6px 10px;"
           bgcolor="0x222222" bgalpha="0.6" roundedge="6" x="0" y="0"
           onover="tween(alpha,1.0,0.1);"
           onout ="tween(alpha,0.9,0.1);"
           onclick="set_mild_fisheye();" />

    <layer name="btn_closeup" type="text" parent="ui_group"
           html="Close-up" css="font-family:Arial; font-size:14px; color:#fff; padding:6px 10px;"
           bgcolor="0x222222" bgalpha="0.6" roundedge="6" x="0" y="30"
           onover="tween(alpha,1.0,0.1);"
           onout ="tween(alpha,0.9,0.1);"
           onclick="set_closeup();" />

    <layer name="btn_tinyplanet" type="text" parent="ui_group"
           html="Tiny Planet" css="font-family:Arial; font-size:14px; color:#fff; padding:6px 10px;"
           bgcolor="0x222222" bgalpha="0.6" roundedge="6" x="0" y="60"
           onover="tween(alpha,1.0,0.1);"
           onout ="tween(alpha,0.9,0.1);"
           onclick="set_tinyplanet();" />
  </layer>

  <scene name="scene_test_pano_wood" title="test-pano-wood"
         onstart="set_mild_fisheye();"
         thumburl="panos/test_pano_wood.tiles/thumb.jpg">

    <control bouncinglimits="calc:image.cube ? true : false" />

    <preview url="panos/test_pano_wood.tiles/preview.jpg" />

    <image>
      <cube url="panos/test_pano_wood.tiles/%s/l%l/%0v/l%l_%s_%0v_%0h.jpg"
            multires="512,640,1280,2624,5248" />
    </image>

  </scene>

</krpano>

